/* Cookie Run Kingdom-inspired soft, bouncy theme accents */
:root {
  --kingdom-bg-1: linear-gradient(180deg, #fff9f0 0%, #fff4ea 50%, #fff 100%);
  --kingdom-chip-bg: rgba(255, 255, 255, 0.85);
  --kingdom-chip-br: rgba(0,0,0,0.08);
  --kingdom-shadow-1: 0 2px 6px rgba(0,0,0,0.08);
  --kingdom-shadow-2: 0 6px 16px rgba(0,0,0,0.12);
}

.kingdom-header {
  background: var(--kingdom-bg-1);
  backdrop-filter: blur(8px);
}

.kingdom-chip {
  background: var(--kingdom-chip-bg);
  border: 1px solid var(--kingdom-chip-br);
  border-radius: 9999px;
  padding: 4px 8px;
  box-shadow: var(--kingdom-shadow-1);
}

.kingdom-dock {
  position: fixed;
  left: 0; right: 0; bottom: env(safe-area-inset-bottom, 0px);
  padding: 8px 10px calc(8px + env(safe-area-inset-bottom, 0px));
  z-index: 40;
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(10px);
  border-top: 1px solid rgba(0,0,0,0.08);
  box-shadow: var(--kingdom-shadow-2);
  /* Ensure readable text on light background in dark mode */
  color: #111;
}

.kingdom-dock .dock-scroll {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.kingdom-dock .dock-scroll::-webkit-scrollbar { display: none; }

.dock-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border-radius: 9999px;
  padding: 8px 10px;
  border: 1px solid rgba(0,0,0,0.08);
  background: white;
  box-shadow: var(--kingdom-shadow-1);
  font-size: 12px;
  min-width: 128px;
  height: 44px;
}
.dock-item .ico {
  font-size: 18px;
}
.dock-item .label {
  font-weight: 600;
  max-width: 72px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.dock-item .price {
  color: rgba(0,0,0,0.6);
}

.bounce-sm { animation: bounce-sm 1.2s ease-in-out infinite; }
@keyframes bounce-sm { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-2px); } }

.float-up { animation: float-up 0.9s ease-out forwards; }
@keyframes float-up { from { opacity: 0; transform: translate(-50%, -2px); } to { opacity: 1; transform: translate(-50%, -8px); } }

.kingdom-sheet {
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: var(--kingdom-shadow-2);
  border-radius: 16px;
}

/* Small pop-in animation for upgrade/add-on markers */
.pop-in { animation: pop-in 300ms ease-out; }
@keyframes pop-in { 0% { transform: scale(0.6); opacity: 0; } 60% { transform: scale(1.15); opacity: 1; } 100% { transform: scale(1); opacity: 0.95; } }

/* Subtle fade/slide for panels and chips */
.fade-in { animation: fade-in 180ms var(--motion-short); }
@keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
.fade-in-up { animation: fade-in-up 220ms var(--motion-short); }
@keyframes fade-in-up { from { opacity: 0; transform: translateY(4px) } to { opacity: 1; transform: translateY(0) } }

/* City View */
.city-view { position: relative; width: 100%; height: 60vh; overflow: hidden; border-radius: 16px; border: 1px solid rgba(0,0,0,0.08); box-shadow: var(--kingdom-shadow-2); background: #fff; }
.city-sky { position: absolute; inset: 0; }
.city-tint { position: absolute; inset: 0; pointer-events: none; }
.city-sun { position: absolute; top: 10%; left: 10%; font-size: 28px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }
.city-skyline { position: absolute; bottom: 72px; left: 0; right: 0; display: flex; align-items: flex-end; gap: 8px; padding: 0 16px; height: 50%; }
.building { width: 28px; min-height: 40px; background: #999; border: 1px solid rgba(0,0,0,0.12); border-bottom: 3px solid rgba(0,0,0,0.2); border-radius: 4px 4px 2px 2px; position: relative; }
.building:after { content: ""; position: absolute; left: 4px; right: 4px; bottom: 6px; height: 2px; background: rgba(255,255,255,0.6); border-radius: 1px; }
.building-civic { background: linear-gradient(180deg,#7dd3fc,#60a5fa); }
.building-retail { background: linear-gradient(180deg,#fdba74,#f97316); }
.building-mfg { background: linear-gradient(180deg,#94a3b8,#64748b); }
.building-power { background: linear-gradient(180deg,#fca5a5,#ef4444); }
.building-util { background: linear-gradient(180deg,#86efac,#22c55e); }
.building-agri { background: linear-gradient(180deg,#bbf7d0,#86efac); }
.roof-accent { position: absolute; top: -6px; left: 6px; right: 6px; height: 6px; background: rgba(0,0,0,0.2); border-radius: 2px 2px 0 0; }
.roof-solar { position: absolute; top: -4px; right: 4px; width: 10px; height: 6px; background: #f59e0b; border: 1px solid rgba(0,0,0,0.2); border-radius: 1px; }
.city-foreground { position: absolute; left: 0; right: 0; bottom: 0; height: 80px; }
.farms { position: absolute; left: 0; right: 0; bottom: 24px; display: flex; justify-content: center; gap: 6px; }
.farm-plot { width: 60px; height: 26px; background: repeating-linear-gradient(45deg,#fef08a,#fef08a 6px,#fde047 6px,#fde047 12px); border: 1px solid rgba(0,0,0,0.1); border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
.turbines { position: absolute; left: 16px; bottom: 8px; display: flex; gap: 8px; font-size: 18px; }
.water { position: absolute; right: 16px; bottom: 8px; font-size: 18px; }

/* Isometric view */
.iso-wrap { position: relative; width: 100%; height: 70vh; }
.iso-toolbar { position: absolute; top: 8px; left: 8px; z-index: 2; display: flex; gap: 6px; }
.iso-toolbar .btn { font-size: 12px; padding: 4px 8px; border-radius: 6px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.85); backdrop-filter: blur(6px); }
.iso-stage { position: absolute; inset: 0; display: grid; place-items: center; overflow: hidden; background: linear-gradient(180deg,#ecfeff,#f0f9ff,#fff); }
.iso-scene { position: relative; transform-style: preserve-3d; transition: transform 300ms ease; }
.iso-tile { position: absolute; width: 60px; height: 60px; background: linear-gradient(135deg,#e2e8f0,#cbd5e1); transform: translate3d(0,0,0) rotateZ(45deg) skewY(-20deg); opacity: 0.65; border: 1px solid rgba(0,0,0,0.08); border-radius: 2px; }
.iso-stack { position: absolute; transform-style: preserve-3d; transition: transform 300ms ease; }
.iso-pillar { width: 26px; background: linear-gradient(180deg,#94a3b8,#64748b); border: 1px solid rgba(0,0,0,0.12); border-bottom: 3px solid rgba(0,0,0,0.25); border-radius: 2px; transform: translate3d(0,0,1px) rotateZ(45deg) skewY(-20deg); transform-origin: bottom center; transition: height 400ms ease; }
.iso-top { position: absolute; left: -17px; top: -17px; width: 34px; height: 34px; display: grid; place-items: center; background: #fff; border: 1px solid rgba(0,0,0,0.12); border-radius: 6px; box-shadow: 0 2px 6px rgba(0,0,0,0.12); transform: translate3d(0,0,2px) rotateZ(45deg) skewY(-20deg); font-size: 18px; }
